<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-KP1HYGJL04"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-KP1HYGJL04');
  </script>

  <meta charset="UTF-8">
  <title>Thank You | Verchas Academy</title>

  <style>
    body{
      font-family: Arial, sans-serif;
      background:#f2f4f8;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
    }
    .box{
      background:#fff;
      padding:40px;
      border-radius:12px;
      text-align:center;
      box-shadow:0 10px 30px rgba(0,0,0,.15);
    }
    h1{color:#004aad}
    p{font-size:1.1em}
  </style>
</head>

<body>
  <div class="box">
  <h1>Thank You!</h1>
  <p>Your registration has been submitted successfully.</p>
  <p>Our team will contact you shortly.</p>

  <!-- ✅ POINT 2 GOES HERE -->
  <button id="downloadBtn">Download Registration Slip</button>

  <p><small>You will be redirected to the homepage after download.</small></p>
</div>

  <!-- Enrollment conversion event -->
  <script>
    gtag('event', 'enroll_complete', {
      'event_category': 'Enrollment',
      'event_label': 'Thank You Page'
    });
  </script>
<!-- jsPDF -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
document.getElementById("downloadBtn").addEventListener("click", function () {

  // 1️⃣ Get saved registration data
  const data = JSON.parse(sessionStorage.getItem("registrationData"));

  if (!data) {
    alert("Registration data not found. Please contact the academy.");
    return;
  }

  // 2️⃣ Create PDF
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  doc.setFontSize(18);
  doc.text("VERCHAS ACADEMY", 105, 20, { align: "center" });

  doc.setFontSize(14);
  doc.text("Student Registration Slip", 105, 30, { align: "center" });

  doc.setFontSize(12);
  doc.text("Registration No: " + data.registrationNo, 20, 50);
  doc.text("Student Name: " + data.studentName, 20, 60);
  doc.text("Father Name: " + data.fatherName, 20, 70);
  doc.text("Mobile: " + data.mobile, 20, 80);

  doc.setFontSize(10);
  doc.text(
    "Please bring this slip along with a valid photo ID.",
    20,
    100
  );

  // 3️⃣ Download PDF (mobile-safe)
  doc.save("RegistrationSlip.pdf");

  // 4️⃣ Redirect to home AFTER download starts
  setTimeout(() => {
    window.location.href = "index.html";
  }, 600);
});
</script>
</body>
</html>
